<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.13.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="The journey of a thousand miles begins with one step">
<meta property="og:type" content="website">
<meta property="og:title" content="Weiru Han&#39;s blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Weiru Han&#39;s blog">
<meta property="og:description" content="The journey of a thousand miles begins with one step">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Weiru Han">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Weiru Han's blog</title>
  






  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Weiru Han's blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Less is more</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Weiru Han</p>
  <div class="site-description" itemprop="description">The journey of a thousand miles begins with one step</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">33</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/15/cross-validation-related/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Weiru Han">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Weiru Han's blog">
      <meta itemprop="description" content="The journey of a thousand miles begins with one step">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Weiru Han's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/15/cross-validation-related/" class="post-title-link" itemprop="url">Cross validation related</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-12-15 16:17:11" itemprop="dateCreated datePublished" datetime="2022-12-15T16:17:11-05:00">2022-12-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-12-17 22:46:52" itemprop="dateModified" datetime="2022-12-17T22:46:52-05:00">2022-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Data-science/" itemprop="url" rel="index"><span itemprop="name">Data science</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="how-to-train-a-final-machine-learning-model">How to train a final machine learning model</h1>
<p>This section relates mostly to the following several questions:</p>
<ul>
<li>what is the purpose of k-fold cross validation?</li>
<li>How to finalize a model?</li>
</ul>
<h2 id="what-is-the-purpose-of-k-fold-cross-validation">What is the purpose of k-fold cross validation?</h2>
<p>Both train-test splits and k-fold cross validation are examples of resampling methods. <a target="_blank" rel="noopener" href="https://machinelearningmastery.com/train-final-machine-learning-model/">The purpose of these methods are to compute a performance measure for the model on test dataset.</a> <a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/27627/normalization-prior-to-cross-validation">They are best viewed as methods to estimate the performance of a <strong>statistical procedure</strong>, rather than a <strong>statistical model</strong></a>.</p>
<h2 id="how-to-finalize-a-model">How to finalize a model?</h2>
<p><a target="_blank" rel="noopener" href="https://machinelearningmastery.com/train-final-machine-learning-model/">Once we have specified the estimated skills, we are finished with the resampling method</a></p>
<ul>
<li>If we are using a train-test split, that means we can <strong>discard</strong> the split datasets and the trained model.</li>
<li>If we are using k-fold cross validation, that means we can <strong>throw away</strong> all of the trained models</li>
</ul>
<p>In other words, once we select the best tuned model by using resampling method, we can finalize the model by applying the chosen machine learning procedure on <strong>the whole dataset</strong></p>
<p>This leads to another question:</p>
<ul>
<li>Why not withhold the model trained on the training dataset or the best model from the cross validation?</li>
</ul>
<p>In fact, we can apply sub-models as the final model, but it may take an indefinite amount of time to train before we obtain them; while cross validation and other resampling approaches can compare various procedures, they also prevent us from selecting an overfitting model.. Furthermore, <a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/52274/how-to-choose-a-predictive-model-after-k-fold-cross-validation">overfitting has to do with model complexity, and it has nothing to do with the amount of data</a>. As such, the model will likely perform better when trained on all of the available data than just the subset used to estimate the performance of the model.</p>
<p>If one really wants to employ models obtained from cross validation as the final models, there are still other ways to do so, which is to <a target="_blank" rel="noopener" href="https://machinelearningmastery.com/randomness-in-machine-learning/">create multiple final models and take the mean from an ensemble of predictions in order to reduce the variance</a>;</p>
<p>It is not suggested to use k models from cross validation as the voting classifier if the true objective is to develop a voting classifier as the final model. In cross validation, each fold could only serve as the test dataset once; hence, k models derived by cross validation are incapable of aggregating results, providing the same purpose as a voting classifier.</p>
<p>An alternate method for employing ensemble models would be to use an <a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/411290/how-to-use-a-cross-validated-model-for-prediction/411366">ensemble-type estimation of performance or generalization error, such as out-of-bag or generalization error</a>. <a target="_blank" rel="noopener" href="https://link.springer.com/article/10.1007/s00216-007-1818-6">Using an un-aggregated cross validation estimate for an ensemble model can result in a pessimistic bias that can range from negligible to substantial</a>, depending on the stability of the CV surrogate models and the number of aggregated surrogate models. Another option may be to pick several models that appear to generalize well across various test sets. Each model would then be trained on the whole training data set with its best-tuned hyperparameters chosen to produce a final model. Finally, these final models can be combined to form the ensemble model.</p>
<h2 id="finalize-the-model-in-caret">Finalize the model in Caret</h2>
<p>In <code>Caret</code>, the <code>train</code> function will carry out cross validation experiment (if we choose to) to determine the best tuned <em>hyperparameters</em>, and use that to train on the entire dataset in order to get the final model.</p>
<p>In this section, we will specify different parameters to see how cross validation works in <code>caret</code> functions</p>
<blockquote>
<p>Use iris data to apply 10-folds cross validation for <code>knn</code> algorithm</p>
</blockquote>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> library<span class="punctuation">(</span>caret<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> inTraining <span class="operator">&lt;-</span> createDataPartition<span class="punctuation">(</span>iris<span class="operator">$</span>Petal.Width<span class="punctuation">,</span> p <span class="operator">=</span> <span class="number">.75</span><span class="punctuation">,</span> <span class="built_in">list</span> <span class="operator">=</span> <span class="literal">FALSE</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> training <span class="operator">&lt;-</span> iris<span class="punctuation">[</span> inTraining<span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line"><span class="operator">&gt;</span> testing  <span class="operator">&lt;-</span> iris<span class="punctuation">[</span><span class="operator">-</span>inTraining<span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">dim</span><span class="punctuation">(</span>training<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">114</span>   <span class="number">5</span></span><br><span class="line"><span class="operator">&gt;</span> fitControl <span class="operator">&lt;-</span> trainControl<span class="punctuation">(</span><span class="comment">## 10-fold CV</span></span><br><span class="line"><span class="operator">+</span>   method <span class="operator">=</span> <span class="string">&quot;cv&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   number <span class="operator">=</span> <span class="number">10</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   classProbs <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   savePredictions <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Tuned hyperparameter length is 10, which means there are <span class="math inline">\(10*114\)</span> prediction dots</p>
</blockquote>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> knnFit1 <span class="operator">&lt;-</span> train<span class="punctuation">(</span>Species <span class="operator">~</span> .<span class="punctuation">,</span> data <span class="operator">=</span> training<span class="punctuation">,</span> </span><br><span class="line"><span class="operator">+</span>                 method <span class="operator">=</span> <span class="string">&quot;knn&quot;</span><span class="punctuation">,</span> </span><br><span class="line"><span class="operator">+</span>                 trControl <span class="operator">=</span> fitControl<span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>                 tuneLength <span class="operator">=</span> <span class="number">10</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>                 preProcess <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;center&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;scale&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 10 groups of performance WRT 10 groups of tuned hyperparameters K</span></span><br><span class="line"><span class="operator">&gt;</span> knnFit1<span class="operator">$</span>results</span><br><span class="line">    k  Accuracy     Kappa AccuracySD    KappaSD</span><br><span class="line"><span class="number">1</span>   <span class="number">5</span> <span class="number">0.9500000</span> <span class="number">0.9250000</span> <span class="number">0.08958064</span> <span class="number">0.13437096</span></span><br><span class="line"><span class="number">2</span>   <span class="number">7</span> <span class="number">0.9583333</span> <span class="number">0.9375000</span> <span class="number">0.07081972</span> <span class="number">0.10622957</span></span><br><span class="line"><span class="number">3</span>   <span class="number">9</span> <span class="number">0.9575758</span> <span class="number">0.9362500</span> <span class="number">0.07135347</span> <span class="number">0.10711656</span></span><br><span class="line"><span class="number">4</span>  <span class="number">11</span> <span class="number">0.9575758</span> <span class="number">0.9362500</span> <span class="number">0.07135347</span> <span class="number">0.10711656</span></span><br><span class="line"><span class="number">5</span>  <span class="number">13</span> <span class="number">0.9659091</span> <span class="number">0.9487500</span> <span class="number">0.05903369</span> <span class="number">0.08867270</span></span><br><span class="line"><span class="number">6</span>  <span class="number">15</span> <span class="number">0.9659091</span> <span class="number">0.9487500</span> <span class="number">0.05903369</span> <span class="number">0.08867270</span></span><br><span class="line"><span class="number">7</span>  <span class="number">17</span> <span class="number">0.9575758</span> <span class="number">0.9362500</span> <span class="number">0.05956599</span> <span class="number">0.08945242</span></span><br><span class="line"><span class="number">8</span>  <span class="number">19</span> <span class="number">0.9325758</span> <span class="number">0.8987500</span> <span class="number">0.08626242</span> <span class="number">0.12942850</span></span><br><span class="line"><span class="number">9</span>  <span class="number">21</span> <span class="number">0.9225758</span> <span class="number">0.8838246</span> <span class="number">0.08332400</span> <span class="number">0.12498478</span></span><br><span class="line"><span class="number">10</span> <span class="number">23</span> <span class="number">0.9125758</span> <span class="number">0.8688993</span> <span class="number">0.06840424</span> <span class="number">0.10258360</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A peek of cross validation prediction</span></span><br><span class="line"><span class="operator">&gt;</span> head<span class="punctuation">(</span>knnFit1<span class="operator">$</span>pred<span class="punctuation">)</span></span><br><span class="line">        pred        obs setosa versicolor virginica rowIndex k Resample</span><br><span class="line"><span class="number">1</span>     setosa     setosa      <span class="number">1</span>          <span class="number">0</span>         <span class="number">0</span>        <span class="number">1</span> <span class="number">5</span>   Fold01</span><br><span class="line"><span class="number">2</span>     setosa     setosa      <span class="number">1</span>          <span class="number">0</span>         <span class="number">0</span>        <span class="number">9</span> <span class="number">5</span>   Fold01</span><br><span class="line"><span class="number">3</span>     setosa     setosa      <span class="number">1</span>          <span class="number">0</span>         <span class="number">0</span>       <span class="number">12</span> <span class="number">5</span>   Fold01</span><br><span class="line"><span class="number">4</span>     setosa     setosa      <span class="number">1</span>          <span class="number">0</span>         <span class="number">0</span>       <span class="number">19</span> <span class="number">5</span>   Fold01</span><br><span class="line"><span class="number">5</span> versicolor versicolor      <span class="number">0</span>          <span class="number">1</span>         <span class="number">0</span>       <span class="number">40</span> <span class="number">5</span>   Fold01</span><br><span class="line"><span class="number">6</span> versicolor versicolor      <span class="number">0</span>          <span class="number">1</span>         <span class="number">0</span>       <span class="number">67</span> <span class="number">5</span>   Fold01</span><br><span class="line"></span><br><span class="line"><span class="comment"># Each observation is predicted 10 times</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">dim</span><span class="punctuation">(</span>knnFit1<span class="operator">$</span>pred<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1140</span>    <span class="number">8</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>From 10-folds cross validation, the best tuned hyperparameter k is 15</p>
</blockquote>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> knnFit1</span><br><span class="line">k<span class="operator">-</span>Nearest Neighbors </span><br><span class="line"></span><br><span class="line"><span class="number">114</span> samples</span><br><span class="line">  <span class="number">4</span> predictor</span><br><span class="line">  <span class="number">3</span> classes<span class="operator">:</span> <span class="string">&#x27;setosa&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;versicolor&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;virginica&#x27;</span> </span><br><span class="line"></span><br><span class="line">Pre<span class="operator">-</span>processing<span class="operator">:</span> centered <span class="punctuation">(</span><span class="number">4</span><span class="punctuation">)</span><span class="punctuation">,</span> scaled <span class="punctuation">(</span><span class="number">4</span><span class="punctuation">)</span> </span><br><span class="line">Resampling<span class="operator">:</span> Cross<span class="operator">-</span>Validated <span class="punctuation">(</span><span class="number">10</span> fold<span class="punctuation">)</span> </span><br><span class="line">Summary of sample sizes<span class="operator">:</span> <span class="number">103</span><span class="punctuation">,</span> <span class="number">102</span><span class="punctuation">,</span> <span class="number">102</span><span class="punctuation">,</span> <span class="number">102</span><span class="punctuation">,</span> <span class="number">102</span><span class="punctuation">,</span> <span class="number">104</span><span class="punctuation">,</span> ... </span><br><span class="line">Resampling results across tuning parameters<span class="operator">:</span></span><br><span class="line"></span><br><span class="line">  k   Accuracy   Kappa    </span><br><span class="line">   <span class="number">5</span>  <span class="number">0.9500000</span>  <span class="number">0.9250000</span></span><br><span class="line">   <span class="number">7</span>  <span class="number">0.9583333</span>  <span class="number">0.9375000</span></span><br><span class="line">   <span class="number">9</span>  <span class="number">0.9575758</span>  <span class="number">0.9362500</span></span><br><span class="line">  <span class="number">11</span>  <span class="number">0.9575758</span>  <span class="number">0.9362500</span></span><br><span class="line">  <span class="number">13</span>  <span class="number">0.9659091</span>  <span class="number">0.9487500</span></span><br><span class="line">  <span class="number">15</span>  <span class="number">0.9659091</span>  <span class="number">0.9487500</span></span><br><span class="line">  <span class="number">17</span>  <span class="number">0.9575758</span>  <span class="number">0.9362500</span></span><br><span class="line">  <span class="number">19</span>  <span class="number">0.9325758</span>  <span class="number">0.8987500</span></span><br><span class="line">  <span class="number">21</span>  <span class="number">0.9225758</span>  <span class="number">0.8838246</span></span><br><span class="line">  <span class="number">23</span>  <span class="number">0.9125758</span>  <span class="number">0.8688993</span></span><br><span class="line"></span><br><span class="line">Accuracy was used to select the optimal model using the largest value.</span><br><span class="line">The final value used <span class="keyword">for</span> the model was k <span class="operator">=</span> <span class="number">15.</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>The final model will use the best tuned hyperparameter(s) and train on the entire dataset; thus there will be 114 fitted values.</p>
</blockquote>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> knnFit1<span class="operator">$</span>finalModel</span><br><span class="line"><span class="number">15</span><span class="operator">-</span>nearest neighbor model</span><br><span class="line">Training set outcome distribution<span class="operator">:</span></span><br><span class="line"></span><br><span class="line">    setosa versicolor  virginica </span><br><span class="line">        <span class="number">37</span>         <span class="number">39</span>         <span class="number">38</span> </span><br><span class="line"><span class="operator">&gt;</span> head<span class="punctuation">(</span>knnFit1<span class="operator">$</span>finalModel<span class="operator">$</span>learn<span class="operator">$</span>X<span class="punctuation">)</span></span><br><span class="line">   Sepal.Length Sepal.Width Petal.Length Petal.Width</span><br><span class="line">X1   <span class="operator">-</span><span class="number">0.9054682</span>  <span class="number">0.95513347</span>    <span class="operator">-</span><span class="number">1.337733</span>   <span class="operator">-</span><span class="number">1.313374</span></span><br><span class="line">X2   <span class="operator">-</span><span class="number">1.1395348</span> <span class="operator">-</span><span class="number">0.14029123</span>    <span class="operator">-</span><span class="number">1.337733</span>   <span class="operator">-</span><span class="number">1.313374</span></span><br><span class="line">X4   <span class="operator">-</span><span class="number">1.4906348</span>  <span class="number">0.07879371</span>    <span class="operator">-</span><span class="number">1.281974</span>   <span class="operator">-</span><span class="number">1.313374</span></span><br><span class="line">X5   <span class="operator">-</span><span class="number">1.0225015</span>  <span class="number">1.17421841</span>    <span class="operator">-</span><span class="number">1.337733</span>   <span class="operator">-</span><span class="number">1.313374</span></span><br><span class="line">X6   <span class="operator">-</span><span class="number">0.5543683</span>  <span class="number">1.83147324</span>    <span class="operator">-</span><span class="number">1.170455</span>   <span class="operator">-</span><span class="number">1.053210</span></span><br><span class="line">X7   <span class="operator">-</span><span class="number">1.4906348</span>  <span class="number">0.73604853</span>    <span class="operator">-</span><span class="number">1.337733</span>   <span class="operator">-</span><span class="number">1.183292</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">dim</span><span class="punctuation">(</span>knnFit1<span class="operator">$</span>finalModel<span class="operator">$</span>learn<span class="operator">$</span>X<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">114</span>   <span class="number">4</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/topepo/caret/issues/240">Set the parameter <code>savePredictions ="best"</code> will enable model display the cross validation results from the sub-model trained by the best tuned hyperparameter(s)</a></p>
</blockquote>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> fitControl <span class="operator">&lt;-</span> trainControl<span class="punctuation">(</span><span class="comment">## 10-fold CV</span></span><br><span class="line"><span class="operator">+</span>   method <span class="operator">=</span> <span class="string">&quot;cv&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   number <span class="operator">=</span> <span class="number">10</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   classProbs <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   savePredictions <span class="operator">=</span> <span class="string">&#x27;final&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> knnFit1 <span class="operator">&lt;-</span> train<span class="punctuation">(</span>Species <span class="operator">~</span> .<span class="punctuation">,</span> data <span class="operator">=</span> training<span class="punctuation">,</span> </span><br><span class="line"><span class="operator">+</span>                 method <span class="operator">=</span> <span class="string">&quot;knn&quot;</span><span class="punctuation">,</span> </span><br><span class="line"><span class="operator">+</span>                 trControl <span class="operator">=</span> fitControl<span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>                 tuneLength <span class="operator">=</span> <span class="number">10</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>                 preProcess <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;center&#x27;</span><span class="punctuation">,</span><span class="string">&#x27;scale&#x27;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> head<span class="punctuation">(</span>knnFit1<span class="operator">$</span>pred<span class="punctuation">)</span></span><br><span class="line">   k       pred        obs     setosa versicolor  virginica rowIndex Resample</span><br><span class="line"><span class="number">1</span> <span class="number">15</span>     setosa     setosa <span class="number">1.00000000</span> <span class="number">0.00000000</span> <span class="number">0.00000000</span>        <span class="number">9</span>   Fold01</span><br><span class="line"><span class="number">2</span> <span class="number">15</span> versicolor versicolor <span class="number">0.06666667</span> <span class="number">0.86666667</span> <span class="number">0.06666667</span>       <span class="number">45</span>   Fold02</span><br><span class="line"><span class="number">3</span> <span class="number">15</span> versicolor versicolor <span class="number">0.00000000</span> <span class="number">0.93333333</span> <span class="number">0.06666667</span>       <span class="number">46</span>   Fold02</span><br><span class="line"><span class="number">4</span> <span class="number">15</span>     setosa     setosa <span class="number">1.00000000</span> <span class="number">0.00000000</span> <span class="number">0.00000000</span>        <span class="number">1</span>   Fold01</span><br><span class="line"><span class="number">5</span> <span class="number">15</span>  virginica  virginica <span class="number">0.00000000</span> <span class="number">0.06666667</span> <span class="number">0.93333333</span>       <span class="number">93</span>   Fold04</span><br><span class="line"><span class="number">6</span> <span class="number">15</span>  virginica  virginica <span class="number">0.00000000</span> <span class="number">0.33333333</span> <span class="number">0.66666667</span>       <span class="number">96</span>   Fold04</span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">dim</span><span class="punctuation">(</span>knnFit1<span class="operator">$</span>pred<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">114</span>   <span class="number">8</span></span><br></pre></td></tr></table></figure>
<h1 id="how-to-use-preprocess-with-cross-validation">How to use preprocess with cross validation?</h1>
<p>The <code>data leakage</code> problem is a significant issue associated with cross validation. It occurs when training dataset characteristics seep into the test dataset. For instance, <a target="_blank" rel="noopener" href="https://machinelearningmastery.com/machine-learning-with-python/">processing your data using <code>normalization</code> or <code>standardization</code> on the complete training dataset prior to learning would not be a proper test because the scale of the data in the test set would have affected the training dataset</a>. One might utilize the <code>Pipeline</code> function in Python to solve this issue. The <code>caret</code> package in R is also capable of handling it, where the author states <a target="_blank" rel="noopener" href="https://github.com/topepo/caret/issues/335">the caret will automatically preprocess the data only to the resampled version of data to avoid data leakage</a>.</p>
<p>As <a target="_blank" rel="noopener" href="https://hastie.su.domains/ElemStatLearn/">elements of statistical learning chapter 7 Model Assessment and Selection</a> states:</p>
<blockquote>
<p>In cross validation, samples must be “left out” before any selection or filtering steps are applied. But there is one qualification: initial <em>unsupervised</em> screening steps can be done before samples are left out. for example, we could select the 1000 predictors with highest variance across all 50 samples, before starting cross validation. Since this filtering does not involve the class labels, it does not give the predictors an unfair advantages.</p>
</blockquote>
<p>Usually, an optimistic estimates of performance are more likely to exist if subsampling happens before cross validation. We could see some discussions in the following urls:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://topepo.github.io/caret/subsampling-for-class-imbalances.html#subsampling-during-resampling">subsampling during resampling</a></li>
<li><a target="_blank" rel="noopener" href="https://yijiew.medium.com/avoiding-leakage-in-cross-validation-when-using-smote-b63fdd3d159d">Avoiding leakage in cross-validation when using SMOTE</a></li>
<li><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/103922/why-is-the-true-test-error-rate-of-any-classifier-50">Why is the true (test) error rate of any classifier 50%?</a></li>
</ul>
<blockquote>
<p>One complication is still related to preprocessing. Should the subsampling occur before or after the preprocessing? For example, if you down-sample the data and use PCA for signal extraction, should the loadings be estimated from the entire training set? The estimate is potentially better since the entire training set is being used but the subsample may happen to capture a small potion of the PCA space. There isn’t any obvious answer</p>
<p><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/103922/why-is-the-true-test-error-rate-of-any-classifier-50">Subsampling during resampling</a></p>
</blockquote>
<hr />
<h1 id="reference">Reference</h1>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/27627/normalization-prior-to-cross-validation">Normalization prior to cross-validation</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://machinelearningmastery.com/train-final-machine-learning-model/">How to Train a Final Machine Learning Model</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/52274/how-to-choose-a-predictive-model-after-k-fold-cross-validation">How to choose a predictive model after k-fold cross-validation?</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://machinelearningmastery.com/randomness-in-machine-learning/">Embrace Randomness in Machine learning</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://scikit-learn.org/stable/modules/ensemble.html#voting-classifier">Voting classifier</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/411290/how-to-use-a-cross-validated-model-for-prediction/411366">How to use a cross-validated model for prediction?</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://link.springer.com/article/10.1007/s00216-007-1818-6">Assessing and improving the stability of chemometric models in small sample size situations</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/254612/how-to-obtain-optimal-hyperparameters-after-nested-cross-validation">How to obtain optimal hyperparameters after nested cross validation?</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://machinelearningmastery.com/nested-cross-validation-for-machine-learning-with-python/">Nested cross-validation for machine learning with python</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/65128/nested-cross-validation-for-model-selection">Nested cross validation for model selection</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/11602/training-on-the-full-dataset-after-cross-validation">Training on the full dataset after cross-validation</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/topepo/caret/issues/240">savePredictions = "best" in trainControl</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://machinelearningmastery.com/machine-learning-with-python/">Brownlee, J. (2016) Machine Learning Mastery with Python: Understand Your Data, Create Accurate Models, and Work Projects End-to-End. Machine Learning Mastery, San Francisco.</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/513656/training-saving-and-distributing-the-model-what-about-data-the-transformation">Training, saving and distributing the model – what about data the transformations?</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/topepo/caret/issues/335">Question about preProcOptions in trainControl</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://hastie.su.domains/ElemStatLearn/">Elements of statistical learning</a></p></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/14/ten-things-related-to-brain-function/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Weiru Han">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Weiru Han's blog">
      <meta itemprop="description" content="The journey of a thousand miles begins with one step">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Weiru Han's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/14/ten-things-related-to-brain-function/" class="post-title-link" itemprop="url">Ten things related to brain function</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-12-14 16:26:56 / Modified: 16:51:44" itemprop="dateCreated datePublished" datetime="2022-12-14T16:26:56-05:00">2022-12-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/intelligence/" itemprop="url" rel="index"><span itemprop="name">intelligence</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li><p>A good brain diet</p>
<ul>
<li>avocado</li>
<li>blueberries</li>
<li>broccoli</li>
<li>eggs</li>
<li>coconut/olive oil</li>
<li>green leafy dark vegetables</li>
<li>wild salmon</li>
<li>termeric</li>
</ul></li>
<li><p>Killing ANTs (Automatic Negative thoughts)</p></li>
<li><p>Exercise</p></li>
<li><p>Brain nutrients/Brain Vitamins</p></li>
<li><p>Positive peer group</p></li>
<li><p>Clean environment</p></li>
<li><p>Sleep</p></li>
<li><p>Brain protection (such as electromagnetic fields)</p></li>
<li><p>New learnings</p></li>
<li><p>Stress management</p></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/07/chi2-is-not-appropriate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Weiru Han">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Weiru Han's blog">
      <meta itemprop="description" content="The journey of a thousand miles begins with one step">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Weiru Han's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/07/chi2-is-not-appropriate/" class="post-title-link" itemprop="url">chi2 is not appropriate</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-12-07 00:05:21" itemprop="dateCreated datePublished" datetime="2022-12-07T00:05:21-05:00">2022-12-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-12-09 10:19:57" itemprop="dateModified" datetime="2022-12-09T10:19:57-05:00">2022-12-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>chi2</code> is mainly used for binary indicator or term counts, so one needs to be really careful when doing Pearson chi-square test. I will provide several functions to compare these differences, the dataset which I use is the pima dataset</p>
<h1 id="a-peek-of-the-dataset">A peek of the dataset</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> read_csv</span><br><span class="line"></span><br><span class="line"><span class="comment"># load data</span></span><br><span class="line">filename = <span class="string">&#x27;dataset/diabetes.csv&#x27;</span></span><br><span class="line">names = [<span class="string">&#x27;preg&#x27;</span>, <span class="string">&#x27;plas&#x27;</span>, <span class="string">&#x27;pres&#x27;</span>, <span class="string">&#x27;skin&#x27;</span>, <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;mass&#x27;</span>, <span class="string">&#x27;pedi&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;class&#x27;</span>]</span><br><span class="line">dataframe = read_csv(filename)</span><br><span class="line">dataframe.columns = names</span><br><span class="line">dataframe.head(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr class="header">
<th></th>
<th>preg</th>
<th>plas</th>
<th>pres</th>
<th>skin</th>
<th>test</th>
<th>mass</th>
<th>pedi</th>
<th>age</th>
<th>class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>6</td>
<td>148</td>
<td>72</td>
<td>35</td>
<td>0</td>
<td>33.6</td>
<td>0.627</td>
<td>50</td>
<td>1</td>
</tr>
<tr class="even">
<td>1</td>
<td>1</td>
<td>85</td>
<td>66</td>
<td>29</td>
<td>0</td>
<td>26.6</td>
<td>0.351</td>
<td>31</td>
<td>0</td>
</tr>
</tbody>
</table>
<h1 id="use-function-chi2">Use function <code>chi2</code></h1>
<ul>
<li>Convert data frame to the array</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array = dataframe.values</span><br><span class="line">array</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">array([[  <span class="number">6.</span>   , <span class="number">148.</span>   ,  <span class="number">72.</span>   , ...,   <span class="number">0.627</span>,  <span class="number">50.</span>   ,   <span class="number">1.</span>   ],</span><br><span class="line">       [  <span class="number">1.</span>   ,  <span class="number">85.</span>   ,  <span class="number">66.</span>   , ...,   <span class="number">0.351</span>,  <span class="number">31.</span>   ,   <span class="number">0.</span>   ],</span><br><span class="line">       [  <span class="number">8.</span>   , <span class="number">183.</span>   ,  <span class="number">64.</span>   , ...,   <span class="number">0.672</span>,  <span class="number">32.</span>   ,   <span class="number">1.</span>   ],</span><br><span class="line">       ...,</span><br><span class="line">       [  <span class="number">5.</span>   , <span class="number">121.</span>   ,  <span class="number">72.</span>   , ...,   <span class="number">0.245</span>,  <span class="number">30.</span>   ,   <span class="number">0.</span>   ],</span><br><span class="line">       [  <span class="number">1.</span>   , <span class="number">126.</span>   ,  <span class="number">60.</span>   , ...,   <span class="number">0.349</span>,  <span class="number">47.</span>   ,   <span class="number">1.</span>   ],</span><br><span class="line">       [  <span class="number">1.</span>   ,  <span class="number">93.</span>   ,  <span class="number">70.</span>   , ...,   <span class="number">0.315</span>,  <span class="number">23.</span>   ,   <span class="number">0.</span>   ]])</span><br></pre></td></tr></table></figure>
<ul>
<li>Use chi2 to calculate chi-square values</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> chi2</span><br><span class="line"></span><br><span class="line"><span class="comment"># chi square values</span></span><br><span class="line">scores,pvalues = chi2(X,Y)</span><br><span class="line">scores</span><br><span class="line">pd.Series(scores,index = names[<span class="number">0</span>:<span class="number">8</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">preg     <span class="number">111.519691</span></span><br><span class="line">plas    <span class="number">1411.887041</span></span><br><span class="line">pres      <span class="number">17.605373</span></span><br><span class="line">skin      <span class="number">53.108040</span></span><br><span class="line">test    <span class="number">2175.565273</span></span><br><span class="line">mass     <span class="number">127.669343</span></span><br><span class="line">pedi       <span class="number">5.392682</span></span><br><span class="line">age      <span class="number">181.303689</span></span><br><span class="line">dtype: float64</span><br></pre></td></tr></table></figure>
<h1 id="accumulate-values-under-the-same-class">Accumulate values under the same class</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># %%</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> scipy.sparse <span class="keyword">import</span> issparse</span><br><span class="line"><span class="keyword">from</span> sklearn.utils <span class="keyword">import</span> check_array</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> LabelBinarizer</span><br><span class="line"><span class="keyword">from</span> sklearn.utils.extmath <span class="keyword">import</span> safe_sparse_dot</span><br><span class="line"></span><br><span class="line">label = <span class="string">&#x27;class&#x27;</span></span><br><span class="line">X,y = dataframe.drop(columns = label), dataframe[label]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">preprocess_X_y</span>(<span class="params">X, y</span>):</span><br><span class="line">    X = check_array(X, accept_sparse=<span class="string">&quot;csr&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> np.<span class="built_in">any</span>((X.data <span class="keyword">if</span> issparse(X) <span class="keyword">else</span> X) &lt; <span class="number">0</span>):</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&quot;Input X must be non-negative.&quot;</span>)</span><br><span class="line"></span><br><span class="line">    Y = LabelBinarizer().fit_transform(y)</span><br><span class="line">    <span class="keyword">if</span> Y.shape[<span class="number">1</span>] == <span class="number">1</span>:</span><br><span class="line">        Y = np.append(<span class="number">1</span> - Y, Y, axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    observed = safe_sparse_dot(Y.T, X)  <span class="comment"># n_classes * n_features</span></span><br><span class="line"></span><br><span class="line">    feature_count = X.<span class="built_in">sum</span>(axis=<span class="number">0</span>).reshape(<span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line">    class_prob = Y.mean(axis=<span class="number">0</span>).reshape(<span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line">    expected = np.dot(class_prob.T, feature_count)</span><br><span class="line">    <span class="keyword">return</span> observed, expected</span><br><span class="line"></span><br><span class="line">f_obs, f_exp = preprocess_X_y(X, y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># %%</span></span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> chisquare</span><br><span class="line"></span><br><span class="line">pd.Series(chisquare(f_obs, f_exp).statistic, index=X.columns)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">preg     <span class="number">111.519691</span></span><br><span class="line">plas    <span class="number">1411.887041</span></span><br><span class="line">pres      <span class="number">17.605373</span></span><br><span class="line">skin      <span class="number">53.108040</span></span><br><span class="line">test    <span class="number">2175.565273</span></span><br><span class="line">mass     <span class="number">127.669343</span></span><br><span class="line">pedi       <span class="number">5.392682</span></span><br><span class="line">age      <span class="number">181.303689</span></span><br><span class="line">dtype: float64</span><br></pre></td></tr></table></figure>
<h1 id="use-function-chi2_contigency">Use function <code>chi2_contigency</code></h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> chi2_contingency</span><br><span class="line">chi_square = pd.Series(<span class="built_in">float</span>(<span class="number">0</span>),index = names[<span class="number">0</span>:<span class="number">8</span>])</span><br><span class="line">columns = dataframe[<span class="string">&#x27;class&#x27;</span>].unique()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> names[<span class="number">0</span>:<span class="number">8</span>]:</span><br><span class="line">    <span class="comment"># Create contingency table</span></span><br><span class="line">    data_crosstab = pd.crosstab(dataframe[n], dataframe[<span class="string">&#x27;class&#x27;</span>],</span><br><span class="line">                            margins = <span class="literal">True</span>, margins_name = <span class="string">&quot;Total&quot;</span>)</span><br><span class="line">    score, pvalue, dof,expected = chi2_contingency(data_crosstab)</span><br><span class="line">    chi_square[n] = score</span><br><span class="line">chi_square</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">preg     <span class="number">64.594809</span></span><br><span class="line">plas    <span class="number">269.733242</span></span><br><span class="line">pres     <span class="number">54.933964</span></span><br><span class="line">skin     <span class="number">73.562894</span></span><br><span class="line">test    <span class="number">227.769830</span></span><br><span class="line">mass    <span class="number">286.470253</span></span><br><span class="line">pedi    <span class="number">533.024096</span></span><br><span class="line">age     <span class="number">140.937520</span></span><br><span class="line">dtype: float64</span><br></pre></td></tr></table></figure>
<h1 id="use-regular-formula">Use regular formula</h1>
<p>In this section I generate contingency table to calculate the chi-square scores</p>
<ul>
<li>Contingency table between <code>pregancy</code> and <code>class</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data_crosstab = pd.crosstab(dataframe[<span class="string">&#x27;preg&#x27;</span>], dataframe[<span class="string">&#x27;class&#x27;</span>],</span><br><span class="line">                            margins = <span class="literal">True</span>, margins_name = <span class="string">&quot;Total&quot;</span>)</span><br><span class="line">data_crosstab</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr class="header">
<th>class (preg)</th>
<th>0</th>
<th>1</th>
<th>Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>73</td>
<td>38</td>
<td>111</td>
</tr>
<tr class="even">
<td>1</td>
<td>106</td>
<td>29</td>
<td>135</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(\vdots\)</span></td>
<td><span class="math inline">\(\vdots\)</span></td>
<td><span class="math inline">\(\vdots\)</span></td>
<td><span class="math inline">\(\vdots\)</span></td>
</tr>
<tr class="even">
<td>Total</td>
<td>500</td>
<td>268</td>
<td>768</td>
</tr>
</tbody>
</table>
<ul>
<li>Use chi-square formula to calculate chi-square scores for each variable</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">names = [<span class="string">&#x27;preg&#x27;</span>, <span class="string">&#x27;plas&#x27;</span>, <span class="string">&#x27;pres&#x27;</span>, <span class="string">&#x27;skin&#x27;</span>, <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;mass&#x27;</span>, <span class="string">&#x27;pedi&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;class&#x27;</span>]</span><br><span class="line"><span class="comment"># set up float(0) so that the calculation is more accurate</span></span><br><span class="line">chi_square = pd.Series(<span class="built_in">float</span>(<span class="number">0</span>),index = names[<span class="number">0</span>:<span class="number">8</span>])</span><br><span class="line">columns = dataframe[<span class="string">&#x27;class&#x27;</span>].unique()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> names[<span class="number">0</span>:<span class="number">8</span>]:</span><br><span class="line">    <span class="comment"># Create contingency table</span></span><br><span class="line">    data_crosstab = pd.crosstab(dataframe[n], dataframe[<span class="string">&#x27;class&#x27;</span>],</span><br><span class="line">                            margins = <span class="literal">True</span>, margins_name = <span class="string">&quot;Total&quot;</span>)</span><br><span class="line">    rows = dataframe[n].unique()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> columns:</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> rows:</span><br><span class="line">            O = data_crosstab[i][j]</span><br><span class="line">            E = data_crosstab[i][<span class="string">&#x27;Total&#x27;</span>] * data_crosstab[<span class="string">&#x27;Total&#x27;</span>][j]/data_crosstab[<span class="string">&#x27;Total&#x27;</span>][<span class="string">&#x27;Total&#x27;</span>]</span><br><span class="line">            chi_square[n] += (O-E) **<span class="number">2</span>/E</span><br><span class="line">chi_square</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">preg     <span class="number">64.594809</span></span><br><span class="line">plas    <span class="number">269.733242</span></span><br><span class="line">pres     <span class="number">54.933964</span></span><br><span class="line">skin     <span class="number">73.562894</span></span><br><span class="line">test    <span class="number">227.769830</span></span><br><span class="line">mass    <span class="number">286.470253</span></span><br><span class="line">pedi    <span class="number">533.024096</span></span><br><span class="line">age     <span class="number">140.937520</span></span><br><span class="line">dtype: float64</span><br></pre></td></tr></table></figure>
<hr />
<h1 id="conclusion">Conclusion</h1>
<p>For continuous variable, better not use <code>chi2</code> as the assumed distribution for the statistic may not be chi-square distribution.</p>
<p>One could also refer to the help document of <code>chi2</code>, which indicates that this function is usually applied to binary indicators or term counts.</p>
<h1 id="reference">Reference</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/scikit-learn/scikit-learn/issues/21455">chi2 should support categorical data other than binary or document count</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/scikit-learn/scikit-learn/pull/24684">DOC only use chi2 on binary and counts features</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/50932433/scipy-and-sklearn-chi2-implementations-give-different-results">Scipy and Sklearn chi2 implementations give different results</a></li>
<li><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/549536/does-chi-square-test-for-independence-sklearn-feature-selection-selectkbest-pr">Does Chi-square test for independence (sklearn.feature_selection.SelectKBest) produce incorect results?</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/scikit-learn/scikit-learn/issues/24593">Erroneous use of chi2 in the documentation</a></li>
<li><a target="_blank" rel="noopener" href="https://www.stat.berkeley.edu/~stark/SticiGui/Text/chiSquare.htm">derivation for chi-square test</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/11/08/Minor-errors-in-R-that-can-be-disregarded/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Weiru Han">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Weiru Han's blog">
      <meta itemprop="description" content="The journey of a thousand miles begins with one step">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Weiru Han's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/11/08/Minor-errors-in-R-that-can-be-disregarded/" class="post-title-link" itemprop="url">Minor errors in R that can be disregarded</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-11-08 18:12:53" itemprop="dateCreated datePublished" datetime="2022-11-08T18:12:53-05:00">2022-11-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-11-09 02:33:00" itemprop="dateModified" datetime="2022-11-09T02:33:00-05:00">2022-11-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/R/" itemprop="url" rel="index"><span itemprop="name">R</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/33352746/can-an-r-matrix-contain-different-datatypes-does-this-hacked-up-matrix-of-lists">Matrix cannot store different type of variables</a></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># each element of x is an integer</span></span><br><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">16</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> str<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"> int <span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">,</span> <span class="number">1</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">10</span> ...</span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># identify type of elements</span></span><br><span class="line"><span class="operator">&gt;</span> typeof<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;integer&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># each element of x is a character</span></span><br><span class="line"><span class="operator">&gt;</span> x<span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="operator">&lt;-</span> <span class="built_in">as.character</span><span class="punctuation">(</span>x<span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> str<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"> chr <span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">,</span> <span class="number">1</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">]</span> <span class="string">&quot;1&quot;</span> <span class="string">&quot;2&quot;</span> <span class="string">&quot;3&quot;</span> <span class="string">&quot;4&quot;</span> <span class="string">&quot;5&quot;</span> <span class="string">&quot;6&quot;</span> <span class="string">&quot;7&quot;</span> <span class="string">&quot;8&quot;</span> <span class="string">&quot;9&quot;</span> <span class="string">&quot;10&quot;</span> <span class="string">&quot;11&quot;</span> <span class="string">&quot;12&quot;</span> <span class="string">&quot;13&quot;</span> <span class="string">&quot;14&quot;</span> <span class="string">&quot;15&quot;</span> <span class="string">&quot;16&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> typeof<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;character&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># each element of y is a list</span></span><br><span class="line"><span class="operator">&gt;</span> y <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span><span class="built_in">list</span><span class="punctuation">(</span><span class="string">&quot;1&quot;</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> str<span class="punctuation">(</span>y<span class="punctuation">)</span></span><br><span class="line">List of <span class="number">4</span></span><br><span class="line"> <span class="operator">$</span> <span class="operator">:</span> chr <span class="string">&quot;1&quot;</span></span><br><span class="line"> <span class="operator">$</span> <span class="operator">:</span> num <span class="number">2</span></span><br><span class="line"> <span class="operator">$</span> <span class="operator">:</span> num <span class="number">3</span></span><br><span class="line"> <span class="operator">$</span> <span class="operator">:</span> num <span class="number">4</span></span><br><span class="line"> <span class="operator">-</span> <span class="built_in">attr</span><span class="punctuation">(</span><span class="operator">*</span><span class="punctuation">,</span> <span class="string">&quot;dim&quot;</span><span class="punctuation">)</span><span class="operator">=</span> int <span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span><span class="number">2</span><span class="punctuation">]</span> <span class="number">2</span> <span class="number">2</span></span><br><span class="line"><span class="operator">&gt;</span> typeof<span class="punctuation">(</span>y<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;list&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p><a target="_blank" rel="noopener" href="https://stat.ethz.ch/pipermail/r-help/2008-April/158990.html">Mode VS Class</a></p>
<blockquote>
<p>Mode is an exclusive classification of objects based on their fundamental structure. The "atomic" modes consist of numeric, complex, character, and logical data types. Modes for recursive objects include 'list' and 'function,' among others. There is one and only one mode for an object.</p>
<p>Class is an object's property that determines how generic functions interact with it. This is not a mutually exclusive category. By convention, if an object has no specific class assigned, such as a simple numeric vector, its class is the same as its mode.</p>
<p>Changing the mode of an object is frequently referred to as "coercion." The mode of an object can change without requiring a class change. e.g.</p>
</blockquote>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> 1<span class="operator">:</span><span class="number">16</span></span><br><span class="line"><span class="operator">&gt;</span> mode<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;numeric&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">dim</span><span class="punctuation">(</span>x<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">4</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> x</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">5</span>    <span class="number">9</span>   <span class="number">13</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">6</span>   <span class="number">10</span>   <span class="number">14</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>    <span class="number">7</span>   <span class="number">11</span>   <span class="number">15</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">4</span>    <span class="number">8</span>   <span class="number">12</span>   <span class="number">16</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;matrix&quot;</span> <span class="string">&quot;array&quot;</span> </span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.numeric</span><span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span></span><br><span class="line"><span class="operator">&gt;</span> mode<span class="punctuation">(</span>x<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="string">&quot;character&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> x</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;1&quot;</span>  <span class="string">&quot;5&quot;</span>  <span class="string">&quot;9&quot;</span>  <span class="string">&quot;13&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;2&quot;</span>  <span class="string">&quot;6&quot;</span>  <span class="string">&quot;10&quot;</span> <span class="string">&quot;14&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;3&quot;</span>  <span class="string">&quot;7&quot;</span>  <span class="string">&quot;11&quot;</span> <span class="string">&quot;15&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span> <span class="string">&quot;4&quot;</span>  <span class="string">&quot;8&quot;</span>  <span class="string">&quot;12&quot;</span> <span class="string">&quot;16&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> mode<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;character&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;matrix&quot;</span> <span class="string">&quot;array&quot;</span> </span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> factor<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> x</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span>  <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span> <span class="number">16</span></span><br><span class="line">Levels<span class="operator">:</span> <span class="number">1</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span> <span class="number">16</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;factor&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> mode<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;numeric&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>NA</strong> in <em>R</em></p>
<blockquote>
<p>Use <strong>NA</strong> as index will replace elements as NA</p>
</blockquote>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> 1<span class="operator">:</span><span class="number">16</span></span><br><span class="line"><span class="operator">&gt;</span> x<span class="punctuation">[</span><span class="literal">NA</span><span class="punctuation">]</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">dim</span><span class="punctuation">(</span>x<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">4</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> x<span class="punctuation">[</span><span class="literal">NA</span><span class="punctuation">]</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> x<span class="punctuation">[</span><span class="literal">NA</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="literal">NA</span>   <span class="literal">NA</span>   <span class="literal">NA</span>   <span class="literal">NA</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="literal">NA</span>   <span class="literal">NA</span>   <span class="literal">NA</span>   <span class="literal">NA</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="literal">NA</span>   <span class="literal">NA</span>   <span class="literal">NA</span>   <span class="literal">NA</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="literal">NA</span>   <span class="literal">NA</span>   <span class="literal">NA</span>   <span class="literal">NA</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://statisticsglobe.com/r-na/">R NA – What are <span class="math inline">\(\text{&lt;Not Available&gt;}\)</span> Values?</a></p>
</blockquote></li>
</ul>
<hr />
<p><strong>To be continued …</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/11/07/Different-methods-of-generating-qqplot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Weiru Han">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Weiru Han's blog">
      <meta itemprop="description" content="The journey of a thousand miles begins with one step">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Weiru Han's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/11/07/Different-methods-of-generating-qqplot/" class="post-title-link" itemprop="url">Different methods of generating qqplot</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-11-07 22:36:50" itemprop="dateCreated datePublished" datetime="2022-11-07T22:36:50-05:00">2022-11-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-11-08 12:43:19" itemprop="dateModified" datetime="2022-11-08T12:43:19-05:00">2022-11-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/R/" itemprop="url" rel="index"><span itemprop="name">R</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>The Q-Q plot, also known as the quantile-quantile plot, is a graphical tool that helps us determine whether a set of data originated from a Normal or exponential distribution. For instance, if a statistical analysis assumes that residuals are normally distributed, a Normal Q-Q plot can be used to verify this assumption. This is merely a visual inspection and not a conclusive proof, so it is somewhat subjective. However, it enables us to see at a glance whether our assumption is plausible, and if not, how the assumption is violated and which data points contribute to the violation. A Q-Q plot is a scatterplot created by superimposing two quantile distributions. If both sets of quantiles came from the same distribution, the points should form a roughly straight line.</p>
<p>This post focuses primarily on introducing functions that can reproduce the Q-Q plot.</p>
<blockquote>
<p><code>qqnorm</code> is a generic function whose default method generates a standard QQ plot of the y values.</p>
</blockquote>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># generate points from normal distribution</span></span><br><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> qnorm<span class="punctuation">(</span>seq<span class="punctuation">(</span><span class="number">0.01</span><span class="punctuation">,</span><span class="number">0.99</span><span class="punctuation">,</span><span class="number">0.01</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="operator">+</span><span class="number">10</span></span><br><span class="line"><span class="operator">&gt;</span> qqnorm<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/djd9gr1bu/image/upload/v1667883208/github_page/qqnorm_plot_ykulkv.png" alt="hi" class="inline"/></p>
<p>This can be reproduced using the function <code>ppoints</code>, which generates the sequence of probability points, as follows:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># generate points from normal distribution</span></span><br><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> qnorm<span class="punctuation">(</span>seq<span class="punctuation">(</span><span class="number">0.01</span><span class="punctuation">,</span><span class="number">0.99</span><span class="punctuation">,</span><span class="number">0.01</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="operator">+</span><span class="number">10</span></span><br><span class="line"><span class="operator">&gt;</span> plot<span class="punctuation">(</span>x <span class="operator">=</span> qnorm<span class="punctuation">(</span>ppoints<span class="punctuation">(</span><span class="built_in">length</span><span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span>y <span class="operator">=</span> x<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/djd9gr1bu/image/upload/v1667883777/github_page/plot_qqnorm_mct4ot.png" class="inline"/></p>
<p><code>qqplot</code> could also reproduce the above</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># generate points from normal distribution</span></span><br><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> qnorm<span class="punctuation">(</span>seq<span class="punctuation">(</span><span class="number">0.01</span><span class="punctuation">,</span><span class="number">0.99</span><span class="punctuation">,</span><span class="number">0.01</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="operator">+</span><span class="number">10</span></span><br><span class="line"><span class="operator">&gt;</span> qqplot<span class="punctuation">(</span>x <span class="operator">=</span> qnorm<span class="punctuation">(</span>ppoints<span class="punctuation">(</span><span class="built_in">length</span><span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span>y <span class="operator">=</span> x<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/djd9gr1bu/image/upload/v1667883777/github_page/plot_qqnorm_mct4ot.png" class="inline"/></p>
<p><code>qplot</code> could also reproduce the above</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> library<span class="punctuation">(</span>ggplot2<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> qnorm<span class="punctuation">(</span>seq<span class="punctuation">(</span><span class="number">0.01</span><span class="punctuation">,</span><span class="number">0.99</span><span class="punctuation">,</span><span class="number">0.01</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="operator">+</span><span class="number">10</span></span><br><span class="line"><span class="operator">&gt;</span> qplot<span class="punctuation">(</span>x <span class="operator">=</span> qnorm<span class="punctuation">(</span>ppoints<span class="punctuation">(</span><span class="built_in">length</span><span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span>y <span class="operator">=</span> x<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/djd9gr1bu/image/upload/v1667884471/github_page/qplot_wosbz4.png" class="inline"/></p>
<blockquote>
<p>For residual plot, however, we may choose to plot standardized residuals against theoretical quantiles in Q-Q plot.</p>
<p>We can use the R dataset <em>randu</em> as an illustration.</p>
</blockquote>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> str<span class="punctuation">(</span>randu<span class="punctuation">)</span></span><br><span class="line"><span class="string">&#x27;data.frame&#x27;</span><span class="operator">:</span>	<span class="number">400</span> obs. of  <span class="number">3</span> variables<span class="operator">:</span></span><br><span class="line"> <span class="operator">$</span> x<span class="operator">:</span> num  <span class="number">0.000031</span> <span class="number">0.044495</span> <span class="number">0.82244</span> <span class="number">0.322291</span> <span class="number">0.393595</span> ...</span><br><span class="line"> <span class="operator">$</span> y<span class="operator">:</span> num  <span class="number">0.000183</span> <span class="number">0.155732</span> <span class="number">0.873416</span> <span class="number">0.648545</span> <span class="number">0.826873</span> ...</span><br><span class="line"> <span class="operator">$</span> z<span class="operator">:</span> num  <span class="number">0.000824</span> <span class="number">0.533939</span> <span class="number">0.838542</span> <span class="number">0.990648</span> <span class="number">0.418881</span> ...</span><br></pre></td></tr></table></figure>
<ul>
<li>If dependent variable is scaled, normal residual <em>qqplot</em> could be different</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> model <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>z <span class="operator">~</span>x<span class="operator">+</span>y<span class="punctuation">,</span> data <span class="operator">=</span> randu<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> var<span class="punctuation">(</span>resid<span class="punctuation">(</span>model<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">0.07731478</span></span><br><span class="line"><span class="operator">&gt;</span> qqnorm<span class="punctuation">(</span>resid<span class="punctuation">(</span>model<span class="punctuation">)</span><span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&#x27;normal qqplot when z is not scaled&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> model <span class="operator">&lt;-</span> lm<span class="punctuation">(</span><span class="number">10</span><span class="operator">*</span>z<span class="operator">~</span>x<span class="operator">+</span>y<span class="punctuation">,</span> data <span class="operator">=</span>randu<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> var<span class="punctuation">(</span>resid<span class="punctuation">(</span>model<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> qqnorm<span class="punctuation">(</span>resid<span class="punctuation">(</span>model<span class="punctuation">)</span><span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&#x27;normal qqplot when z is scaled&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/djd9gr1bu/image/upload/v1667928296/github_page/qqplot_notscale_vs_scale_ok9oh8.png" class="inline"/></p>
<p>Clearly, scaling the dependent variable <em>z</em> affects the residual.</p>
<blockquote>
<p>Before scaling</p>
</blockquote>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> model <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>z <span class="operator">~</span>x<span class="operator">+</span>y<span class="punctuation">,</span>data <span class="operator">=</span> randu<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>model<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Call<span class="operator">:</span></span><br><span class="line">lm<span class="punctuation">(</span>formula <span class="operator">=</span> z <span class="operator">~</span> x <span class="operator">+</span> y<span class="punctuation">,</span> data <span class="operator">=</span> randu<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Residuals<span class="operator">:</span></span><br><span class="line">     Min       <span class="number">1</span>Q   Median       <span class="number">3</span>Q      Max </span><br><span class="line"><span class="operator">-</span><span class="number">0.51260</span> <span class="operator">-</span><span class="number">0.23114</span> <span class="operator">-</span><span class="number">0.01989</span>  <span class="number">0.22893</span>  <span class="number">0.56084</span> </span><br><span class="line"></span><br><span class="line">Coefficients<span class="operator">:</span></span><br><span class="line">            Estimate Std. Error t value Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="operator">|</span>t<span class="operator">|</span><span class="punctuation">)</span>    </span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span>  <span class="number">0.48017</span>    <span class="number">0.03811</span>  <span class="number">12.598</span>   <span class="operator">&lt;</span><span class="number">2e-16</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">x            <span class="number">0.05424</span>    <span class="number">0.04902</span>   <span class="number">1.106</span>    <span class="number">0.269</span>    </span><br><span class="line">y           <span class="operator">-</span><span class="number">0.05713</span>    <span class="number">0.04757</span>  <span class="operator">-</span><span class="number">1.201</span>    <span class="number">0.230</span>    </span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br><span class="line"></span><br><span class="line">Residual standard error<span class="operator">:</span> <span class="number">0.2788</span> on <span class="number">397</span> degrees of freedom</span><br><span class="line">Multiple R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.007008</span><span class="punctuation">,</span>	Adjusted R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.002006</span> </span><br><span class="line"><span class="built_in">F</span><span class="operator">-</span>statistic<span class="operator">:</span> <span class="number">1.401</span> on <span class="number">2</span> and <span class="number">397</span> DF<span class="punctuation">,</span>  p<span class="operator">-</span>value<span class="operator">:</span> <span class="number">0.2476</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>After scaling</p>
</blockquote>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> model <span class="operator">&lt;-</span> lm<span class="punctuation">(</span><span class="number">10</span><span class="operator">*</span>z<span class="operator">~</span>x<span class="operator">+</span>y<span class="punctuation">,</span>data <span class="operator">=</span>randu<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>model<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Call<span class="operator">:</span></span><br><span class="line">lm<span class="punctuation">(</span>formula <span class="operator">=</span> <span class="number">10</span> <span class="operator">*</span> z <span class="operator">~</span> x <span class="operator">+</span> y<span class="punctuation">,</span> data <span class="operator">=</span> randu<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">Residuals<span class="operator">:</span></span><br><span class="line">    Min      <span class="number">1</span>Q  Median      <span class="number">3</span>Q     Max </span><br><span class="line"><span class="operator">-</span><span class="number">5.1260</span> <span class="operator">-</span><span class="number">2.3114</span> <span class="operator">-</span><span class="number">0.1989</span>  <span class="number">2.2893</span>  <span class="number">5.6084</span> </span><br><span class="line"></span><br><span class="line">Coefficients<span class="operator">:</span></span><br><span class="line">            Estimate Std. Error t value Pr<span class="punctuation">(</span><span class="operator">&gt;</span><span class="operator">|</span>t<span class="operator">|</span><span class="punctuation">)</span>    </span><br><span class="line"><span class="punctuation">(</span>Intercept<span class="punctuation">)</span>   <span class="number">4.8017</span>     <span class="number">0.3811</span>  <span class="number">12.598</span>   <span class="operator">&lt;</span><span class="number">2e-16</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">x             <span class="number">0.5424</span>     <span class="number">0.4902</span>   <span class="number">1.106</span>    <span class="number">0.269</span>    </span><br><span class="line">y            <span class="operator">-</span><span class="number">0.5713</span>     <span class="number">0.4757</span>  <span class="operator">-</span><span class="number">1.201</span>    <span class="number">0.230</span>    </span><br><span class="line"><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span></span><br><span class="line">Signif. codes<span class="operator">:</span>  <span class="number">0</span> ‘<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.001</span> ‘<span class="operator">*</span><span class="operator">*</span>’ <span class="number">0.01</span> ‘<span class="operator">*</span>’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></span><br><span class="line"></span><br><span class="line">Residual standard error<span class="operator">:</span> <span class="number">2.788</span> on <span class="number">397</span> degrees of freedom</span><br><span class="line">Multiple R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.007008</span><span class="punctuation">,</span>	Adjusted R<span class="operator">-</span>squared<span class="operator">:</span>  <span class="number">0.002006</span> </span><br><span class="line"><span class="built_in">F</span><span class="operator">-</span>statistic<span class="operator">:</span> <span class="number">1.401</span> on <span class="number">2</span> and <span class="number">397</span> DF<span class="punctuation">,</span>  p<span class="operator">-</span>value<span class="operator">:</span> <span class="number">0.2476</span></span><br></pre></td></tr></table></figure>
<p>Using standardized residuals, the expected value of the residuals is zero, while the variance is (approximately) one. This has two benefits:</p>
<ol type="1">
<li>If you rescale one of your variables, the residual plots will not change.</li>
<li>The residuals in the <em>qqplot</em> should lie on the line y = x</li>
<li>The residuals in the <em>qqplot</em> should lie on the line y = x You anticipate that 95% of your residuals will fall between -1.96 and 1.96. This makes it simpler to identify outliers.</li>
</ol>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> model <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>z <span class="operator">~</span>x<span class="operator">+</span>y<span class="punctuation">,</span>data <span class="operator">=</span> randu<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> var<span class="punctuation">(</span>rstandard<span class="punctuation">(</span>model<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1.002759</span></span><br><span class="line"><span class="operator">&gt;</span> qqnorm<span class="punctuation">(</span>rstandard<span class="punctuation">(</span>model<span class="punctuation">)</span><span class="punctuation">,</span>main <span class="operator">=</span> <span class="string">&#x27;standardized residual qqplot before scaling&#x27;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> model <span class="operator">&lt;-</span> lm<span class="punctuation">(</span><span class="number">10</span><span class="operator">*</span>z<span class="operator">~</span>x<span class="operator">+</span>y<span class="punctuation">,</span>data <span class="operator">=</span>randu<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> var<span class="punctuation">(</span>rstandard<span class="punctuation">(</span>model<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1.002759</span></span><br><span class="line"><span class="operator">&gt;</span> qqnorm<span class="punctuation">(</span>rstandard<span class="punctuation">(</span>model<span class="punctuation">)</span><span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&#x27;standardized residual qqplot after scaling&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/djd9gr1bu/image/upload/v1667929101/github_page/stan_res_qqplot_gnnmo8.png" class="inline"/></p>
<h1 id="reference">Reference</h1>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/571762/what-exactly-does-ppoints-in-r-do">What exactly does ppoints() in R do?</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://data.library.virginia.edu/understanding-q-q-plots/">Understanding Q-Q Plots</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/260872/why-does-scaling-the-features-affect-the-prediction-of-a-regression">Why does scaling the features affect the prediction of a regression?</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://www.statology.org/standardized-residuals-in-r/">How to Calculate Standardized Residuals in R</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/12395/why-is-r-plotting-standardized-residuals-against-theoretical-quantiles-in-a-q-q">Why is R plotting standardized residuals against theoretical quantiles in a Q-Q plot?</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://boostedml.com/2019/03/linear-regression-plots-how-to-read-a-qq-plot.html">The QQ Plot in Linear Regression</a></p></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/11/07/Set-up-hexo-page-in-WSL-system/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Weiru Han">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Weiru Han's blog">
      <meta itemprop="description" content="The journey of a thousand miles begins with one step">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Weiru Han's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/11/07/Set-up-hexo-page-in-WSL-system/" class="post-title-link" itemprop="url">Set up hexo page in WSL system</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-11-07 20:33:19 / Modified: 23:14:12" itemprop="dateCreated datePublished" datetime="2022-11-07T20:33:19-05:00">2022-11-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>This post mainly introduces how to build up a webpage from scratch using Hexo framework based on WSL system.</p>
<h1 id="install-and-configuration-procedure">Install and configuration procedure</h1>
<ul>
<li><p>Install <a target="_blank" rel="noopener" href="https://github.com/nvm-sh/nvm#troubleshooting-on-linux">nvm</a></p>
<p><code>$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.2/install.sh | bash</code></p>
<blockquote>
<p>Running either of the above commands downloads a script and runs it. The script clones the nvm repository to <code>~/.nvm</code>, and attempts to add the source lines from the snippet below to the correct profile file (<code>~/.bash_profile</code>, <code>~/.zshrc</code>, <code>~/.profile</code>, or <code>~/.bashrc</code>).</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">&quot;<span class="subst">$([ -z <span class="string">&quot;<span class="variable">$&#123;XDG_CONFIG_HOME-&#125;</span>&quot;</span> ] &amp;&amp; printf %s <span class="string">&quot;<span class="variable">$&#123;HOME&#125;</span>/.nvm&quot;</span> || printf %s <span class="string">&quot;<span class="variable">$&#123;XDG_CONFIG_HOME&#125;</span>/nvm&quot;</span>)</span>&quot;</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; \. <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span> <span class="comment"># This loads nvm</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>On Linux, after running the install script, if you get <code>nvm: command not found</code> or see no feedback from your terminal after you type <code>command -v nvm</code>, simply close your current terminal, open a new terminal, and try verifying again. Alternatively, you can run the following commands for the different shells on the command line:</p>
<p><em>bash</em>: <code>source ~/.bashrc</code></p>
<p><em>zsh</em>: <code>source ~/.zshrc</code></p>
<p><em>ksh</em>: <code>. ~/.profile</code></p>
<p>These should pick up the <code>nvm</code> command.</p>
</blockquote></li>
<li><p>Install <a target="_blank" rel="noopener" href="https://hexo.io/docs/">hexo</a></p>
<p><code>$ npm install -g hexo-cli</code></p>
<blockquote>
<p>Advanced users may prefer to install and use <code>hexo</code> package instead.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo</span><br></pre></td></tr></table></figure>
<p>Once installed, you can run Hexo in two ways:</p>
<ol type="1">
<li><code>npx hexo &lt;command&gt;</code></li>
<li>Linux users can set relative path of <code>node_modules/</code> folder:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;PATH=&quot;$PATH:./node_modules/.bin&quot;&#x27;</span> &gt;&gt; ~/.profile</span><br></pre></td></tr></table></figure>
<p>then run Hexo using <code>hexo &lt;command&gt;</code></p>
</blockquote></li>
<li><p>Initialize webpage folder</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;webpage_name&gt;</span><br><span class="line"><span class="built_in">cd</span> &lt;webpage_name&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>Download configuration packages</p>
<p>For example</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Download local search toolkit</span></span><br><span class="line">npm install hexo-generator-searchdb</span><br><span class="line"><span class="comment"># Download NEXT theme</span></span><br><span class="line">npm install hexo-theme-next</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="troubleshooting">Troubleshooting</h1>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://github.com/theme-next/hexo-theme-next/issues/1454">Mathjax configuration problem</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install pandoc</span></span><br><span class="line">sudo apt-get install pandoc</span><br><span class="line">npm un hexo-renderer-marked</span><br><span class="line">npm i hexo-renderer-pandoc</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/31/mind-thinking/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Weiru Han">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Weiru Han's blog">
      <meta itemprop="description" content="The journey of a thousand miles begins with one step">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Weiru Han's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/10/31/mind-thinking/" class="post-title-link" itemprop="url">Mind thinking</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-10-31 03:19:06" itemprop="dateCreated datePublished" datetime="2022-10-31T03:19:06-04:00">2022-10-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-11-07 00:39:59" itemprop="dateModified" datetime="2022-11-07T00:39:59-05:00">2022-11-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/random-thoughts/" itemprop="url" rel="index"><span itemprop="name">random thoughts</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>There is a strong possibility that we were created by an unknown entity or entities (I choose to switch between singular and plural for not knowing if there are a group of entities). Assuming this to be true, the following question can be posed: who creates the mysterious entity or entities that create us?</p>
<p>Following this line of reasoning, one would conclude that the entire universe is a simulation, functioning like Matryoshka dolls, and is replete with unending circulation.</p>
<p><img src="https://res.cloudinary.com/djd9gr1bu/image/upload/v1667201189/github_page/parallel_potzkz.jpg" alt="hi" class="inline"/></p>
<p>Given the notion that we are simulated with an extraordinarily high probability, emotions have lost their significance. In reality, the level of chemical compounds such as dopamine is closely connected with the degree of depression or happiness. However, not only feelings are pointless. According to this idea, intelligence, physical characteristics, and a variety of other factors are determined before birth.</p>
<p>From what I've seen, it's easy for people to accept that they're not strong or tall based on their genes and nutrition during adolescence, but it's often excruciatingly painful to accept that their fluid intelligence may not get better with time. <em>To avoid depression, it would be advantageous to be a complete and absolute rationalist in the truest sense of the term, while at the same time accepting some dogmas.</em></p>
<p><img src="https://res.cloudinary.com/djd9gr1bu/image/upload/v1667201074/github_page/brain_image_pocqns.webp" alt="hi" class="inline"/></p>
<p>It is possible that we are modifiable modules. In this simulation experiment, the traits were allocated at the beginning of the birth, but the roads to our fate are countless. As a result, we could compare ourselves to humanoid robotics by employing various algorithms to traverse the final uncertainty. Bayes's rule might be used to determine the local optimal path, and reinforcement learning could be used to continuously adjust daily strategy.</p>
<p>This blog entry serves as a reminder to consider my weaknesses from the past to the present. Knowing every failure I've encountered, stupid decision I've made, and wrong verbal response or body language I've displayed has been the primary discipline in my life, and will remain so in the future.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/28/hidden%20jargon%20in%20statistics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Weiru Han">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Weiru Han's blog">
      <meta itemprop="description" content="The journey of a thousand miles begins with one step">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Weiru Han's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/28/hidden%20jargon%20in%20statistics/" class="post-title-link" itemprop="url">hidden jargon in statistics</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-28 18:22:47" itemprop="dateCreated datePublished" datetime="2022-09-28T18:22:47-04:00">2022-09-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-11-07 00:39:59" itemprop="dateModified" datetime="2022-11-07T00:39:59-05:00">2022-11-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/experiment-design/" itemprop="url" rel="index"><span itemprop="name">experiment design</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="randomization-replication-repeated-measurement-blocking">Randomization, replication, repeated measurement, blocking</h1>
<p><strong>randomization</strong> means both the allocation of the experimental material and the order in which the individual runs of the experiment are to be performed randomly. Randomization could meet the requirement of the statistical methods that the observations (or errors) are independently distributed random variables. By using randomization, extraneous errors could be averaged out.</p>
<p><strong>replication</strong> means an independent <strong>repeat run</strong> of each factor combination. First it allows the experimenter to obtain an estimate of the experimental error; this estimate of error becomes a basic unit of measurement for determining whether observed differences in the data are really <em>statistically</em> different. Second if the sample mean is used to estimate the true mean response for one of the factor levels in the experiment, replication permits the experimenter to obtain a more precise estimate of this parameter.</p>
<p><strong>Repeated measurement</strong> involves measuring the same subject multiple times; <strong>Replication</strong> involves running the same study on different subjects with identical conditions (same factor combination)</p>
<p><strong>Blocking</strong> is a design technique used to improve the precision with which comparisons among the factors of interest are made. Often blocking is used to reduce or eliminate the variability transmitted from <strong>nuisance factors</strong>, which may influence the experimental response but in which we are not directly interested.</p>
<h1 id="standard-deviation-and-standard-error">standard deviation and standard error</h1>
<ul>
<li><strong>Standard deviation</strong> describes variability within a <strong>single sample</strong>, while <strong>standard error</strong> describes variability across multiple samples of a population</li>
<li><strong>Standard deviation</strong> is a descriptive statistic that can be calculated from sample data, while <strong>standard error</strong> is an inferential statistic that can only be estimated</li>
</ul>
<p><strong>Standard deviation</strong> involves population standard deviation <span class="math inline">\(\sigma\)</span> and sample standard deviation <span class="math inline">\(s_n\)</span>. Sample standard deviation <span class="math inline">\(s_n\)</span> includes biased estimator of <span class="math inline">\(\sigma\)</span> as <span class="math inline">\(s_n=\sqrt{\frac{1}{n}\sum_i^n(x_i-\bar{x})^2}\)</span> and unbiased estimator of <span class="math inline">\(\sigma\)</span> as <span class="math inline">\(s_{n-1}=\sqrt{\frac{n}{n-1}s_n^2}=\sqrt{\frac{1}{n-1}\sum_{i=1}^n(x_i-\bar{x})^2}\)</span></p>
<p><strong>Standard error</strong> is the <strong>standard deviation</strong> of the means, and can be said as the <strong>standard deviation</strong> of the sampling distribution. <strong>Standard error</strong> of the mean <span class="math inline">\(\bar{x}\)</span> is equal to the population standard deviation divided by the square root of number of samples <span class="math inline">\(n\)</span></p>
<p>Suppose <span class="math inline">\(X_1,X_2,\cdots,X_n\)</span> are a random sample from an <span class="math inline">\(N(\mu,\sigma^2)\)</span> distribution. Then the standard deviation of <span class="math inline">\(\bar{X}\)</span> is the standard error, as <span class="math inline">\(SD(\bar{X})=\sigma/\sqrt{n}\)</span>. Usually the <span class="math inline">\(\sigma\)</span> is unknown, and is estimated by <span class="math inline">\(s_n\)</span> or <span class="math inline">\(s_{n-1}\)</span>. Therefore, by giving the observed sample standard deviation <span class="math inline">\(s_n\)</span> or <span class="math inline">\(s_{n-1}\)</span>, the standard error of the mean <span class="math inline">\(\bar{X}\)</span> could be estimated by <span class="math inline">\(SE(\bar{X})=\frac{s_n}{\sqrt{n}}\)</span> or <span class="math inline">\(SE(\bar{X})=\frac{s_{n-1}}{\sqrt{n}}\)</span></p>
<h1 id="confidence-interval-and-credible-interval">Confidence interval and credible interval</h1>
<p>A great explanation of the difference between confidence interval and credible interval can be found in <a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/2272/whats-the-difference-between-a-confidence-interval-and-a-credible-interval">What's the difference between a confidence interval and a credible interval?</a></p>
<h1 id="sufficient-statistic">Sufficient statistic</h1>
<p>Here is an useful <strong>Q&amp;A</strong> explaining the definition of <strong>sufficient statistic</strong></p>
<p><a target="_blank" rel="noopener" href="https://math.stackexchange.com/questions/1186645/understanding-sufficient-statistic">Understanding Sufficient statistic.</a></p>
<h1 id="power-sample-size-and-effect-size">Power, sample size, and effect size</h1>
<p>Here is a great blog explaining the definition of power, sample size calculation and effect size calculation</p>
<p><a target="_blank" rel="noopener" href="https://sphweb.bumc.bu.edu/otlt/mph-modules/bs/bs704_power/bs704_power_print.html#:~:text=In%20order%20to%20estimate%20the,%2C%20or%20largest%2C%20sample%20sizes.">power and sample size determination</a></p>
<h1 id="reference">Reference</h1>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://www.wiley.com/en-us/Design+and+Analysis+of+Experiments%2C+10th+Edition-p-9781119492443">Design and analysis of experiments</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/62312/difference-between-replication-and-repeated-measurements">Difference between replication and repeated measurements</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://www.pearson.com/us/higher-education/program/Tamhane-Statistics-and-Data-Analysis-From-Elementary-to-Intermediate/PGM227786.html">Statistics and Data Analysis: From Elementary to Intermediate</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/2272/whats-the-difference-between-a-confidence-interval-and-a-credible-interval">What's the difference between a confidence interval and a credible interval?</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://math.stackexchange.com/questions/1186645/understanding-sufficient-statistic">Understanding Sufficient statistic.</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://sphweb.bumc.bu.edu/otlt/mph-modules/bs/bs704_power/bs704_power_print.html#:~:text=In%20order%20to%20estimate%20the,%2C%20or%20largest%2C%20sample%20sizes.">power and sample size determination</a></p></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/01/independent-random-vectors/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Weiru Han">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Weiru Han's blog">
      <meta itemprop="description" content="The journey of a thousand miles begins with one step">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Weiru Han's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/01/independent-random-vectors/" class="post-title-link" itemprop="url">Prove $\bar{X}$ and $X_i-\bar{X}$ are independent if $X_i's$ are normally distributed</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-01 17:52:38" itemprop="dateCreated datePublished" datetime="2022-09-01T17:52:38-04:00">2022-09-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-11-07 00:39:59" itemprop="dateModified" datetime="2022-11-07T00:39:59-05:00">2022-11-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/statistics/" itemprop="url" rel="index"><span itemprop="name">statistics</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>To Prove <span class="math inline">\(\bar{X}\)</span> and <span class="math inline">\(X_i-\bar{X}\)</span> are independent if <span class="math inline">\(X_i&#39;s\)</span> are normally distributed and <span class="math inline">\(\bar{X}\)</span> and <span class="math inline">\(X_i-\bar{X}\)</span> are uncorrelated, two conditions are needed to be fulfilled:</p>
<ul>
<li>Prove that given a joint MGF <span class="math inline">\(M_{X,Y}(s,t)\)</span>, <span class="math inline">\(M_{X,Y}(s,t)=M_X(s)\cdot M_Y(t)\)</span> is the sufficient condition for independence of <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span></li>
<li>Prove MGF of <span class="math inline">\((\bar{X},X_i-\bar{X})\)</span> can be expressed as product of MGF of <span class="math inline">\(\bar{X}\)</span> and MGF of <span class="math inline">\(X_i-\bar{X}\)</span></li>
</ul>
<p>It's worth mentioning the <strong>uniqueness theorem of MGFS</strong>:</p>
<blockquote>
<p><strong>Theorem 1:</strong></p>
<p>Suppose <span class="math inline">\(\exists\mathbf{t}&gt;0\)</span> such that <span class="math inline">\(M_{\mathbf{X}}(\mathbf{t})&lt;\infty\)</span> for all <span class="math inline">\(\mathbf{t}\in\mathbb{R}^n\)</span> with <span class="math inline">\(||\mathbf{t}||\leq r\)</span>. Then, the distribution of <span class="math inline">\(\mathbf{X}\)</span></p>
<p>is determined uniquely by the function <span class="math inline">\(M_{\mathbf{X}}\)</span>. That is, if <span class="math inline">\(\mathbf{Y}\)</span> is any random vector whose MGF is the same as <span class="math inline">\(M_{\mathbf{X}}\)</span>, then <span class="math inline">\(\mathbf{Y}\)</span> has the same distribution as <span class="math inline">\(\mathbf{X}\)</span></p>
</blockquote>
<p>Let <span class="math inline">\(\mathbf{X}\)</span> be a random <span class="math inline">\(n-\)</span>vector with a MGF that is finite in an open neighborhood of the origin <span class="math inline">\(0\in \mathbb{R}^n\)</span>. Let <span class="math inline">\(\tilde{X}\)</span> denote an <strong>independent</strong> copy of <span class="math inline">\(\mathbf{X}\)</span>. Define a new random vector <span class="math inline">\(\mathbf{Y}\)</span> as follows: <span class="math display">\[
\mathbf{Y:=}\begin{bmatrix}X_1\\ \vdots \\ X_r\\\tilde{X}_{r+1}\\
\vdots\\ \tilde{X}_n\end{bmatrix}
\]</span> Then, <span class="math display">\[
\begin{gather*}
M_{\mathbf{Y}}(\mathbf{t})=Ee^{\sum_{i=1}^rt_iX_i}\cdot Ee^{\sum_{j=r+1}^nt_jX_j}\\
=M_{\mathbf{X}}(t_1,\cdots,t_r,0\cdots,0)\cdot M_{\mathbf{X}}(0,\cdots,0,t_{r+1},\cdots,t_n)
\end{gather*}
\]</span> Suppose there exists <span class="math inline">\(r=1,\cdots,n\)</span> such that <span class="math display">\[
M_{\mathbf{X}}(\mathbf{t})=M_{\mathbf{X}}(t_1,\cdots,t_r,0,\cdots,0)\cdot M_{\mathbf{X}}(0,\cdots,0,t_{r+1},\cdots,t_n)
\]</span> for all <span class="math inline">\(\mathbf{t}\in \mathbb{R}^n\)</span>.</p>
<p>Then according to the <strong>theorem 1</strong>, <span class="math inline">\(\mathbf{X}\)</span> and <span class="math inline">\(\mathbf{Y}\)</span> have the same MGF’s, and therefore have the same distribution. That is, for all sets <span class="math inline">\(A_1,\cdots,A_n,\)</span> there is <span class="math display">\[
P\{X_1\in A_1,\cdots,X_n\in A_j\}=P\{Y_1\in A_1,\cdots,Y_n\in A_n\}
\]</span> which is, by construction equal to <span class="math display">\[
P\{X_1\in A_1,\cdots,X_r\in A_r\}\cdot P\{\tilde{X}_{r+1}\in A_{r+1},\cdots,\tilde{X}_n\in A_n\}
\]</span> Since <span class="math inline">\(\tilde{X}\)</span> has the same distribution as <span class="math inline">\(\mathbf{X}\)</span>, this proves that <span class="math display">\[
P\{X_1\in A_1,\cdots, X_n\in A_n\}=P\{X_1\in A_1,\cdots,X_r\in A_r\}\cdot P\{X_{r+1}\in A_{r+1},\cdots,X_n\in A_n\}
\]</span> Which implies that <span class="math inline">\((X_1,\cdots,X_r)\)</span> and <span class="math inline">\((X_{r+1},\cdots,X_n)\)</span> are independent.</p>
<p>Then we have the second theorem</p>
<blockquote>
<p><strong>Theorem 2</strong>:</p>
<p>(Independence theorem of MGFs). Let <span class="math inline">\(X\)</span> be a random n-vector with a MGF that is finite in an open neighborhood of the origin <span class="math inline">\(\mathbf{0}\in \mathbb{R}^n\)</span>. Suppose there exists <span class="math inline">\(r=1,\cdots,n\)</span> such that <span class="math display">\[
M_{\mathbf{X}}(\mathbf{t})=M_{\mathbf{X}}(t_1,\cdots,t_r,0,\cdots,0)\cdot M_{\mathbf{X}}(0,\cdots,0,X_{r+1},\cdots,X_n)
\]</span> for all <span class="math inline">\(\mathbf{t}\in\mathbb{R}^n\)</span>. Then <span class="math inline">\((X_1,\cdots,X_r)\)</span> and <span class="math inline">\((X_{r+1},\cdots,X_n)\)</span> are independent</p>
</blockquote>
<p>By now, we have proved the first statement that</p>
<blockquote>
<p>Given a joint MGF <span class="math inline">\(M_{X,Y}(s,t)\)</span>, <span class="math inline">\(M_{X,Y}(s,t)=M_X(s)\cdot M_Y(t)\)</span> is the sufficient condition for independence of <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span></p>
</blockquote>
<p>Next we prove the second statement, by utilizing the first statement.</p>
<p>The proof process is given by the answer to my posted question <a target="_blank" rel="noopener" href="https://math.stackexchange.com/questions/4521956/prove-barx-and-x-i-barx-are-independent-if-x-is-are-normally-distri">Prove <span class="math inline">\(\bar{X}\)</span> and <span class="math inline">\(X_i-\bar{X}\)</span> are independent if <span class="math inline">\(X_i&#39;s\)</span> are independently normally distributed</a></p>
<p>I hereby paste this elegant answer in my blog, and also give thanks to <a target="_blank" rel="noopener" href="https://math.stackexchange.com/users/154826/damian-pavlyshyn">Damian Pavlyshyn</a></p>
<p>(Note: In this answer I'll only consider standard normal <span class="math inline">\(X_i\)</span>s, since it's no harder to do when they have other means and variances)</p>
<p>One way of doing this is with moment generating functions. For a bivariate random variable <span class="math inline">\(Z = (Z_1, Z_2)\)</span>, <span class="math inline">\(Z_1\)</span> and <span class="math inline">\(Z_2\)</span> are independent if and only if the moment generating function <span class="math inline">\(M_Z(\mathbf{s}) = \mathbf{E} e^{\mathbf{s}^T Z}\)</span> factors into a product of a functions of <span class="math inline">\(s_1\)</span> and <span class="math inline">\(s_2\)</span> only, where <span class="math inline">\(\mathbf{s} = (s_1, s_2)\)</span>.</p>
<p>Now, the thing to notice is that <span class="math inline">\((\bar{X}, X_i - \bar{X})\)</span> is a linear transformation of the whole sample <span class="math inline">\(X = (X_1, \dotsc, X_n)\)</span>. Namely, <span class="math display">\[
\begin{pmatrix}\bar{X} \\ X_i - \bar{X}\end{pmatrix}
= \begin{pmatrix}\mathbf{1}^T/n \\ e_i^T - \mathbf{1}^T/n\end{pmatrix} X
:= H X
\]</span> where <span class="math inline">\(\mathbf{1}\)</span> is a vector of all <span class="math inline">\(1\)</span>s and <span class="math inline">\(e_i\)</span> is the vector of all <span class="math inline">\(0\)</span>s with a <span class="math inline">\(1\)</span> in the <span class="math inline">\(i\)</span>th entry.</p>
<p>We can use this to write down the MGF: <span class="math display">\[
\begin{align*}
\mathbf{E} \exp\biggl\{\mathbf{s}^T \begin{pmatrix}\bar{X} \\ X_i - \bar{X}\end{pmatrix}\biggr\}
= \mathbf{E} \exp\{\mathbf{s}^T H X\} 
= \mathbf{E} \exp\{(H^T\mathbf{s})^T X\} 
\end{align*}
\]</span> Then we can use the known moment generating function of a vector of <strong>iid normals</strong> (<span class="math inline">\(\mathbf{E} e^{\mathbf{t}^T X} = \exp\{\frac{1}{2}\mathbf{t}^T \mathbf{t}\}\)</span>) to conclude that <span class="math display">\[
\mathbf{E} \exp\{(H^T\mathbf{s})^T X\} 
= \exp\{\frac{1}{2}(H^T\mathbf{s})^T(H^T\mathbf{s})\}
= \exp\{\frac{1}{2}\mathbf{s}^T HH^T \mathbf{s}\}.
\]</span></p>
<p>Now, we can multiply <span class="math display">\[
\begin{gather*}
HH^T = \begin{pmatrix}\mathbf{1}^T/n \\ e_i^T - \mathbf{1}^T/n\end{pmatrix} \begin{pmatrix}\mathbf{1}/n , &amp; e_i - \mathbf{1}/n\end{pmatrix} \\
= \begin{pmatrix}
\mathbf{1}^T/n \mathbf{1}/n &amp; \mathbf{1}^T/n (e_i - \mathbf{1}/n) \\
(e_i - \mathbf{1}/n)^T \mathbf{1}/n &amp; (e_i - \mathbf{1}/n)^T(e_i - \mathbf{1}/n)
\end{pmatrix} \\
= \begin{pmatrix}
1/n &amp; 0 \\
0 &amp; 1 - 1/n
\end{pmatrix}
\end{gather*}
\]</span></p>
<p>so that the MGF becomes <span class="math display">\[
\exp\biggl\{\frac{1}{2}\mathbf{s}^T HH^T \mathbf{s}\biggr\}
= \exp\biggl\{\frac{1}{2}\biggl(\frac{1}{n}s_1^2 + \frac{n-1}{n}s_2^2\biggr)\biggr\}
= e^{\frac{1}{2n}s_1^2} e^{\frac{n-1}{2n} s_2^2}.
\]</span></p>
<p>Since this factors into terms containing only <span class="math inline">\(s_1\)</span> and <span class="math inline">\(s_2\)</span> respectively, we conclude that <span class="math inline">\(\bar{X}\)</span> and <span class="math inline">\(X_i - \bar{X}\)</span> are independent (and also that they have <span class="math inline">\(N(0, 1/n)\)</span> and <span class="math inline">\(N(0, 1 - 1/n)\)</span> distributions respectively).</p>
<h2 id="reference">Reference</h2>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://drive.google.com/file/d/1OpCqfbBYdXLlstIkWCTPoGAyS-6B-yTJ/view">Moment generating function, multivariate normal</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://drive.google.com/file/d/1-M0Y2A365Xn1TX3Eo7mbZwVoSKfM8nDL/view?usp=sharing">Moment generating function and independence</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/74711/necessary-and-sufficient-condition-on-joint-mgf-for-independence">Necessary and sufficient condition on joint MGF for independence</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://math.stackexchange.com/questions/4521956/prove-barx-and-x-i-barx-are-independent-if-x-is-are-normally-distri">Prove <span class="math inline">\(\bar{X}\)</span> and <span class="math inline">\(X_i-\bar{X}\)</span> are independent if <span class="math inline">\(X_i&#39;s\)</span> are independently normally distributed</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://stats.stackexchange.com/questions/519827/why-does-bary-y-i-bary-being-normally-distributed-imply-that-bar">Why does <span class="math inline">\((\bar{Y}, Y_i - \bar{Y})\)</span> being normally distributed imply that <span class="math inline">\(\bar{Y}\)</span> and <span class="math inline">\(Y_i - \bar{Y}\)</span> are independent for all <span class="math inline">\(i\)</span>?</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://math.stackexchange.com/questions/609732/jointly-gaussian-uncorrelated-random-variables-are-independent">Jointly Gaussian uncorrelated random variables are independent</a></p></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/06/27/Project-management/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Weiru Han">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Weiru Han's blog">
      <meta itemprop="description" content="The journey of a thousand miles begins with one step">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Weiru Han's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/06/27/Project-management/" class="post-title-link" itemprop="url">Project management</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-06-27 18:02:11" itemprop="dateCreated datePublished" datetime="2022-06-27T18:02:11-04:00">2022-06-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-11-07 00:39:59" itemprop="dateModified" datetime="2022-11-07T00:39:59-05:00">2022-11-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Conference/" itemprop="url" rel="index"><span itemprop="name">Conference</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="imperatives-for-good-project-management-and-delivery">8 Imperatives for Good project Management and Delivery</h1>
<pre><code class="highlight mermaid">graph TB
A[Set expectations] --&gt; B[Make projects as small as possible]
B --&gt; C[Isolate the unknown from the known]
C --&gt; D[Manage from the end backward]
D --&gt; E[Have everything in writing]
E --&gt; F[Deal with everthing as early as possible]
F --&gt; G[Verify you have met all requirements]
G --&gt; H[Measure and analyze yourself]
</code></pre>
<h2 id="reference">Reference</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://msightanalytics.com/">Msight Analytics</a></li>
<li><a target="_blank" rel="noopener" href="https://www.usf.edu/arts-sciences/conferences/asa2022/index.aspx">ASA2022 Florida meeting</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Weiru Han</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.1/dist/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>
<script class="next-config" data-name="chatra" type="application/json">{"enable":true,"async":true,"id":"DWYLFGF8d2dgPGfdG"}</script>
<script src="/js/third-party/chat/chatra.js"></script>
<script async src="https://call.chatra.io/chatra.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdn.jsdelivr.net/npm/pdfobject@2.2.8/pdfobject.min.js","integrity":"sha256-tu9j5pBilBQrWSDePOOajCUdz6hWsid/lBNzK4KgEPM="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@9.1.7/dist/mermaid.min.js","integrity":"sha256-G58AID1YoX5YaEtWfXSI0VLrZ6N4kvNvwg0BI8zUFxE="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
